import{p as I,u as $,a as M,g as U,b as q,m as V}from"./CK7VfWEZ.js";import{B as h,a8 as W,J as p,r as D,u as z,o as G,c as g,h as _,d as J,F as K,G as Q,a9 as j,D as R,e as X,n as Y,q as E,a3 as Z,a as ee,aa as k,ab as S,a0 as F,ac as te,ad as se,H as L,a5 as ae,ae as oe,af as A,ag as re,P as w,ah as ne}from"./CJ3hqhHM.js";import{_ as ue}from"./DlAUqK2U.js";const ie=["type","sizes","srcset"],le=["src","sizes","srcset"],ce=h({__name:"NuxtPicture",props:I,emits:["load","error"],setup(s,{emit:r}){const e=s,n=W(),d=r,a=!1,t=$(),{attrs:m,options:i,modifiers:b}=M(e),u=p(()=>U(e.src)),P=p(()=>["png","webp","gif","svg"].includes(u.value)),f=p(()=>e.legacyFormat?e.legacyFormat:P.value?"png":"jpeg"),y=p(()=>{var l,c;const o=((l=e.format)==null?void 0:l.split(","))||(u.value==="svg"?["svg"]:(c=t.options.format)!=null&&c.length?[...t.options.format]:["webp"]);return o[0]==="svg"?[{src:e.src}]:(o.includes(f.value)&&o.splice(o.indexOf(f.value),1),o.push(f.value),o.map(N=>{const{srcset:T,sizes:C,src:H}=t.getSizes(e.src,{...i.value,sizes:e.sizes||t.options.screens,densities:e.densities,modifiers:{...b.value,format:N}});return{src:H,type:`image/${N}`,sizes:C,srcset:T}}))}),x=p(()=>y.value[y.value.length-1]),B=p(()=>{const o={...e.imgAttrs,"data-nuxt-pic":""};for(const l in n)l in q&&!(l in o)&&(o[l]=n[l]);return o}),v=D(),O=z().isHydrating;return G(()=>{v.value&&(v.value.complete&&O&&(v.value.getAttribute("data-error")?d("error",new Event("error")):d("load",new Event("load"))),v.value.onload=o=>{d("load",o)},v.value.onerror=o=>{d("error",o)},V("nuxt-picture"))}),(o,l)=>(_(),g("picture",null,[(_(!0),g(K,null,Q(y.value.slice(0,-1),c=>(_(),g("source",{key:c.src,type:c.type,sizes:c.sizes,srcset:c.srcset},null,8,ie))),128)),x.value?(_(),g("img",j({key:0,ref_key:"imgEl",ref:v},{...R(m),...R(a)?{onerror:"this.setAttribute('data-error', 1)"}:{},...B.value},{src:x.value.src,sizes:x.value.sizes,srcset:x.value.srcset}),null,16,le)):J("",!0)]))}}),pe={class:"c-contents-header"},de=h({__name:"Contentsheader",props:{src:{},class:{}},setup(s){return(r,e)=>{const n=ce;return _(),g("div",pe,[X(n,{format:"webp",src:r.src,sizes:"100vw md:100vw lg:1200px",alt:"コンテンツヘッダーイメージ",class:Y(["u-object-fit-cover-wrapper",r.class])},null,8,["src","class"])])}}}),be=ue(de,[["__scopeId","data-v-73ab7053"]]),me=h({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(s,r){return()=>L(k[s.name],s.layoutProps,r.slots)}}),fe={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},Pe=h({name:"NuxtLayout",inheritAttrs:!1,props:fe,setup(s,r){const e=z(),n=F(w),a=!n||n===E()?S():n,t=p(()=>{let u=R(s.name)??(a==null?void 0:a.meta.layout)??"default";return u&&!(u in k)&&s.fallback&&(u=R(s.fallback)),u}),m=Z();r.expose({layoutRef:m});const i=e.deferHydration();if(e.isHydrating){const u=e.hooks.hookOnce("app:error",i);ee().beforeEach(u)}let b;return()=>{const u=t.value&&t.value in k,P=(a==null?void 0:a.meta.layoutTransition)??te,f=b;return b=t.value,se(u&&P,{default:()=>L(oe,{suspensible:!0,onResolve:()=>{ae(i)}},{default:()=>L(ye,{layoutProps:j(r.attrs,{ref:m}),key:t.value||void 0,name:t.value,shouldProvide:!s.name,isRenderingNewLayout:y=>y!==f&&y===t.value,hasTransition:!!P},r.slots)})}).default()}}}),ye=h({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(s,r){const e=s.name;s.shouldProvide&&A(ne,{isCurrent:a=>e===(a.meta.layout??"default")});const n=F(w);if(n&&n===E()){const a=S(),t={};for(const m in a){const i=m;Object.defineProperty(t,i,{enumerable:!0,get:()=>s.isRenderingNewLayout(s.name)?a[i]:n[i]})}A(w,re(t))}return()=>{var a,t;return!e||typeof e=="string"&&!(e in k)?(t=(a=r.slots).default)==null?void 0:t.call(a):L(me,{key:e,layoutProps:s.layoutProps,name:e},r.slots)}}});export{Pe as _,be as a};
